<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>W-Reader - 自定义书源规则说明</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="static/img/icon.svg" />
    <link href="static/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="static/css/hljs/intellij-light.css" rel="stylesheet"/>
    <link href="static/css/md/github-markdown.min.css" rel="stylesheet"/>
    <link href="static/css/rule.css" rel="stylesheet"/>
    <link href="static/css/message.css" rel="stylesheet"/>
    <script src="static/js/tailwindcss.min.js"></script>
    <script src="static/js/jquery.min.js"></script>
    <script src="static/js/message.js"></script>
    <script src="static/js/highlight.min.js"></script>
    <script>
        tailwind.config = {
            // darkMode: 'media', // 基于系统首选项 (默认)
            darkMode: 'class', // 基于类名手动切换
            theme: {
                extend: {
                    colors: {
                        primary: '#24C18F',
                        secondary: '#36CFC9',
                        dark: '#1D2939',
                        light: '#F9FAFB',
                        accent: '#FF7D00'
                    },
                },
            },
            plugins: [],
        };
    </script>
</head>
<body>
<div class="main">
    <!-- 导航栏 -->
    <header id="navbar" class="fixed w-full top-0 z-50 transition-all duration-300 bg-white shadow-sm">
        <div class="mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <a href="index.html" class="flex items-center space-x-2">
                    <div class="w-10 h-10 rounded-lg flex items-center justify-center text-white">
                        <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                             width="30" height="30">
                            <g transform="translate(-100, -20)">
                                <path d="M369.664 973.312c-42.496 0-77.312-34.816-77.312-77.312V263.168c0-42.496 34.816-77.312 77.312-77.312h492.032c42.496 0 77.312 34.816 77.312 77.312v632.32c0 42.496-34.816 77.312-77.312 77.312H369.664z"
                                      fill="#FFFFFF"></path>
                                <path d="M861.696 209.92c29.184 0 53.76 24.064 53.76 53.76V896c0 29.184-24.064 53.76-53.76 53.76H369.664c-29.184 0-53.76-24.064-53.76-53.76V263.168c0-29.184 24.064-53.76 53.76-53.76h492.032m0-47.616H369.664c-55.808 0-101.376 45.568-101.376 101.376v632.32c0 55.808 45.568 101.376 101.376 101.376h492.032c55.808 0 101.376-45.568 101.376-101.376v-632.32c0.512-55.808-45.056-101.376-101.376-101.376z"
                                      fill="#333333"></path>
                                <path d="M369.664 884.736c-42.496 0-77.312-34.816-77.312-77.312V174.592c0-42.496 34.816-77.312 77.312-77.312h492.032c42.496 0 77.312 34.816 77.312 77.312v632.32c0 42.496-34.816 77.312-77.312 77.312H369.664z"
                                      fill="#24c18f"></path>
                                <path d="M861.696 121.344c29.184 0 53.76 24.064 53.76 53.76v632.32c0 29.184-24.064 53.76-53.76 53.76H369.664c-29.184 0-53.76-24.064-53.76-53.76V174.592c0-29.184 24.064-53.76 53.76-53.76h492.032m0-47.616H369.664c-55.808 0-101.376 45.568-101.376 101.376v632.32c0 55.808 45.568 101.376 101.376 101.376h492.032c55.808 0 101.376-45.568 101.376-101.376v-632.32c0.512-55.808-45.056-101.376-101.376-101.376z"
                                      fill="#333333"></path>
                                <path d="M583.168 342.528c-5.632 0-10.752-2.048-15.36-5.632L512 290.304l-55.808 46.592c-4.608 3.584-9.728 5.632-15.36 5.632-3.584 0-7.168-0.512-10.24-2.048-8.192-4.096-13.824-12.288-13.824-21.504V121.344c0-13.312 10.752-24.064 24.064-24.064h142.336c13.312 0 24.064 10.752 24.064 24.064v197.12c0 9.216-5.632 17.92-13.824 21.504-3.072 1.536-6.656 2.56-10.24 2.56z"
                                      fill="#FF4540"></path>
                            </g>
                        </svg>
                    </div>
                    <span class="text-xl font-bold text-primary text-black dark:text-white">W-Reader</span>
                </a>

                <div class="flex items-center space-x-4">
                    <a href="https://plugins.jetbrains.com/plugin/25572-w-reader"
                       target="_blank"
                       class="hidden sm:flex items-center px-4 py-2 rounded-lg bg-primary text-white hover:bg-primary/90 transition-custom">
                        <i class="fa fa-download mr-2"></i> 立即安装
                    </a>
                    <a href="https://github.com/Wei-1021/w-reader"
                       target="_blank"
                       class="hidden sm:flex items-center px-4 py-2 rounded-lg bg-primary text-white hover:bg-primary/90 transition-custom">
                        <i class="fa fa-github mr-2"></i> GitHub
                    </a>
                    <a href="javascript: void(0)"
                       id="toggle-dark-mode"
                       class="hidden items-center px-4 py-2 rounded-lg bg-primary text-black dark:text-white hover:bg-primary/90 transition-custom">
                        <i class="fa fa-moon-o"></i>
                    </a>
                </div>
            </div>
        </div>
    </header>
    <div class="container markdown-body text-black dark:text-white pt-20" id="container"></div>
    <!-- 全局悬浮块 -->
    <div class="fixed-box fixed top-[45%] left-10 z-50 w-50">
        <div class="fixed-box-blockquote-arrow fixed-box-blockquote-collapsed">收起<br>所有</div>
        <div class="fixed-box-blockquote-arrow fixed-box-blockquote-expanded">展开<br>所有</div>
    </div>

    <!-- 联系与鸣谢 -->
    <section class="py-20 bg-white">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid md:grid-cols-2 gap-12 max-w-5xl mx-auto">
                <div>
                    <h2 class="text-2xl font-bold mb-6">联系我们</h2>
                    <p class="text-gray-600 mb-6">如果您有任何问题或建议，请通过以下方式联系：</p>
                    <ul class="space-y-4">
                        <li class="flex items-center gap-3">
                            <i class="fa fa-envelope text-primary text-xl"></i>
                            <a href="mailto:1075542448@qq.com" class="text-primary hover:underline">Email: 1075542448@qq.com</a>
                        </li>
                        <li class="flex items-center gap-3">
                            <i class="fa fa-qq text-primary text-xl"></i>
                            <a href="tencent://message/?uin=1075542448&Site=&Menu=yes" class="text-primary hover:underline">QQ: 1075542448</a>
                        </li>
                        <li class="flex items-center gap-3">
                            <i class="fa fa-github text-primary text-xl"></i>
                            <a href="https://github.com/Wei-1021/w-reader" target="_blank" class="text-primary hover:underline">GitHub 仓库</a>
                        </li>
                    </ul>
                </div>

                <div>
                    <h2 class="text-2xl font-bold mb-6">鸣谢</h2>
                    <p class="text-gray-600 mb-4">本项目的开发离不开以下开源库的支持：</p>
                    <ul class="space-y-3">
                        <li class="flex items-center gap-3">
                            <i class="fa fa-external-link text-gray-400"></i>
                            <a href="https://github.com/documentnode/epub4j" target="_blank" class="text-primary hover:underline">epub4j</a>
                        </li>
                        <li class="flex items-center gap-3">
                            <i class="fa fa-external-link text-gray-400"></i>
                            <a href="https://github.com/json-path/JsonPath" target="_blank" class="text-primary hover:underline">JsonPath</a>
                        </li>
                        <li class="flex items-center gap-3">
                            <i class="fa fa-external-link text-gray-400"></i>
                            <a href=" https://janino-compiler.github.io/janino/" target="_blank" class="text-primary hover:underline">janino</a>
                        </li>
                        <li class="flex items-center gap-3">
                            <i class="fa fa-external-link text-gray-400"></i>
                            <a href="https://web.archive.org/web/20210108055829/http://www.javazoom.net/javalayer/javalayer.html" target="_blank" class="text-primary hover:underline">jlayer</a>
                        </li>
                        <li class="flex items-center gap-3">
                            <i class="fa fa-external-link text-gray-400"></i>
                            <span>Java-WebSocket</span>
                        </li>
                        <li class="flex items-center gap-3">
                            <i class="fa fa-external-link text-gray-400"></i>
                            <span>snakeyaml</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- 页脚 -->
    <footer class="bg-dark text-white py-12">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="flex items-center space-x-2 mb-6 md:mb-0">
                    <div class="w-10 h-10 rounded-lg flex items-center justify-center text-primary">
                        <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                             width="30" height="30">
                            <g transform="translate(-100, -20)">
                                <path d="M369.664 973.312c-42.496 0-77.312-34.816-77.312-77.312V263.168c0-42.496 34.816-77.312 77.312-77.312h492.032c42.496 0 77.312 34.816 77.312 77.312v632.32c0 42.496-34.816 77.312-77.312 77.312H369.664z"
                                      fill="#FFFFFF"></path>
                                <path d="M861.696 209.92c29.184 0 53.76 24.064 53.76 53.76V896c0 29.184-24.064 53.76-53.76 53.76H369.664c-29.184 0-53.76-24.064-53.76-53.76V263.168c0-29.184 24.064-53.76 53.76-53.76h492.032m0-47.616H369.664c-55.808 0-101.376 45.568-101.376 101.376v632.32c0 55.808 45.568 101.376 101.376 101.376h492.032c55.808 0 101.376-45.568 101.376-101.376v-632.32c0.512-55.808-45.056-101.376-101.376-101.376z"
                                      fill="#333333"></path>
                                <path d="M369.664 884.736c-42.496 0-77.312-34.816-77.312-77.312V174.592c0-42.496 34.816-77.312 77.312-77.312h492.032c42.496 0 77.312 34.816 77.312 77.312v632.32c0 42.496-34.816 77.312-77.312 77.312H369.664z"
                                      fill="#24c18f"></path>
                                <path d="M861.696 121.344c29.184 0 53.76 24.064 53.76 53.76v632.32c0 29.184-24.064 53.76-53.76 53.76H369.664c-29.184 0-53.76-24.064-53.76-53.76V174.592c0-29.184 24.064-53.76 53.76-53.76h492.032m0-47.616H369.664c-55.808 0-101.376 45.568-101.376 101.376v632.32c0 55.808 45.568 101.376 101.376 101.376h492.032c55.808 0 101.376-45.568 101.376-101.376v-632.32c0.512-55.808-45.056-101.376-101.376-101.376z"
                                      fill="#333333"></path>
                                <path d="M583.168 342.528c-5.632 0-10.752-2.048-15.36-5.632L512 290.304l-55.808 46.592c-4.608 3.584-9.728 5.632-15.36 5.632-3.584 0-7.168-0.512-10.24-2.048-8.192-4.096-13.824-12.288-13.824-21.504V121.344c0-13.312 10.752-24.064 24.064-24.064h142.336c13.312 0 24.064 10.752 24.064 24.064v197.12c0 9.216-5.632 17.92-13.824 21.504-3.072 1.536-6.656 2.56-10.24 2.56z"
                                      fill="#FF4540"></path>
                            </g>
                        </svg>
                    </div>
                    <span class="text-xl font-bold">W-Reader</span>
                </div>

                <div class="text-gray-400 text-sm text-center md:text-right">
                    <p>© 2024 W-Reader. 基于 Apache License 2.0 开源协议。</p>
                    <p class="mt-1">版本 v0.1.0</p>
                </div>
            </div>
        </div>
    </footer>

    <textarea style="opacity: 0; position: absolute; left: -99999px;" id="copy_in"></textarea>
</div>

<script type="module">
    import {marked} from "./static/js/marked.esm.js";

    marked.setOptions({
        renderer: new marked.Renderer(),
        gfm: true,
        tables: true,
        breaks: false,
        pedantic: false,
        sanitize: false,
        smartLists: true,
        smartypants: false
    });
    fetch('static/md/custom-rule-info.md')
        .then(response => response.text())
        .then(data => {
            $("#container").html(marked(data))
            pre();
            blockquoteCollapsed();
            globalBlockquoteCollapsed();
            hljs.highlightAll();
        })
        .catch(err => {
            console.log(err);
        })

    function blockquoteCollapsed() {
        let blockquotes = $('.markdown-body blockquote');
        blockquotes.before('<div class="blockquote-arrow blockquote-collapsed"></div>')
        // 监听点击
        $('.blockquote-arrow').click(function () {
            // 当前如果含有blockquote-collapsed类，则修改成blockquote-expanded类，反义亦然
            if ($(this)[0].classList.contains('blockquote-collapsed')) {
                $(this).removeClass('blockquote-collapsed');
                $(this).addClass('blockquote-expanded');
                // 隐藏子节点
                $(this).next().hide();
            } else {
                $(this).removeClass('blockquote-expanded');
                $(this).addClass('blockquote-collapsed');
                // 显示子节点
                $(this).next().show();
            }
        });
    }

    function globalBlockquoteCollapsed() {
        let blockquoteArrow = $('.blockquote-arrow');
        // 监听点击
        $('.fixed-box-blockquote-arrow').click(function () {
            // 如果blockquote-collapsed类，则修改成blockquote-expanded类，反义亦然
            if ($(this)[0].classList.contains('fixed-box-blockquote-collapsed')) {
                blockquoteArrow.removeClass('blockquote-collapsed');
                blockquoteArrow.addClass('blockquote-expanded');
                // 隐藏子节点
                blockquoteArrow.next().hide();
            } else {
                blockquoteArrow.removeClass('blockquote-expanded');
                blockquoteArrow.addClass('blockquote-collapsed');
                // 显示子节点
                blockquoteArrow.next().show();
            }
        })
    }

    function pre() {
        let pre = $('.markdown-body pre');
        pre.append(
            '<div class="pre-icon pre-copy absolute top-2 right-5 cursor-pointer"><i class="fa fa-copy"></i></div>'
        )

        $('.pre-icon').click(function () {
            // 获取当前pre的代码
            let code = $(this).parent().find('code').text();
            // 创建一个textarea元素
            let textarea = $('#copy_in');
            // 将代码写入textarea元素
            textarea.text(code);
            // 将textarea元素添加到body中
            // $('body').append(textarea);
            // 选中textarea元素中的内容
            textarea.select();
            // 执行复制操作
            document.execCommand('copy');

            Message.info('复制成功')
        });
    }
</script>
</body>
</html>